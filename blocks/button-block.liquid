<div
  class="w-full flex my-{{ block.settings.margin_y }} justify-{{ block.settings.button_alignment }}"
  {{ block.shopify_attributes }}
>
  {% assign final_link = block.settings.button_link %}

  {% if block.settings.product != blank %}
    {% assign final_link = block.settings.product.url %}
  {% elsif block.settings.collection != blank %}
    {% assign final_link = block.settings.collection.url %}
  {% endif %}

  {% if block.settings.button_text != blank and final_link != blank %}
    {% render 'button',
      type: 'link',
      url: block.settings.button_text,
      text: block.settings.button_text
      aria_label: 'icon-facebook',
      font_size: block.settings.button_font_size
      bg_color: block.settings.button_bg
      text_color: block.settings.button_text_color
      class: 'px-{{ block.settings.padding_x }} py-{{ block.settings.padding_y }} rounded-{{ block.settings.border_radius }} font-semibold transition',
    %}
  {% endif %}
</div>

{% schema %}
{
  "name": "Button Block",
  "settings": [
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Custom Link (optional)"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Select Product (optional)"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Select Collection (optional)"
    },
    {
      "type": "color",
      "id": "button_bg",
      "label": "Button Background",
      "default": "#c42764"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_font_size",
      "label": "Font Size (px)",
      "min": 10,
      "max": 40,
      "step": 1,
      "default": 16
    },
    {
      "type": "select",
      "id": "button_alignment",
      "label": "Alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "range",
      "id": "padding_x",
      "label": "Padding X",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 6
    },
    {
      "type": "range",
      "id": "padding_y",
      "label": "Padding Y",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "margin_y",
      "label": "Margin Y",
      "min": 0,
      "max": 50,
      "step": 2,
      "default": 0
    },
    {
      "type": "select",
      "id": "border_radius",
      "label": "Border Radius (px)",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "md", "label": "Small" },
        { "value": "lg", "label": "Medium" },
        { "value": "xl", "label": "Large" },
        { "value": "3xl", "label": "Extra Large" },
        { "value": "full", "label": "Full" }
      ]
    }
  ],
  "presets": [{ "name": "Custom Button Block", "category": "Button" }]
}
{% endschema %}
