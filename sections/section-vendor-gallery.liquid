{% liquid
  assign section_id = section.id
  assign title_section = section.settings.title_section
  assign section_width = section.settings.section_width | default: 'max-w-7xl'
  assign title_color = section.settings.title_color | default: '#111827'
  assign title_class = section.settings.title_font_size | append: ' ' | append: section.settings.title_section_alignment
  assign slides_desktop = 8
  assign slides_mobile = 2
  assign padding_vertical = section.settings.padding_vertical | default: 0
  assign padding_horizontal = section.settings.padding_horizontal | default: 0
%}

<section
  id="shopify-section-{{ section_id }}"
  class="vendor-gallery {{ section_width }} mx-auto"
  style="padding: {{ padding_vertical }}px {{ padding_horizontal }}px"
>
  {% if title_section != blank %}
    <h2 class="{{ title_class }} py-2" style="color: {{ title_color }}">
      {{ title_section }}
    </h2>
  {% endif %}

  <!-- Swiper Container -->
  <div
    class="swiper mySwiper-{{ section_id }} w-full"
    data-next-btn="swiper-button-next-{{ section_id }}"
    data-prev-btn="swiper-button-prev-{{ section_id }}"
    data-slides-per-view="{{ slides_desktop }}"
    data-slides-per-view-mobile="{{ slides_mobile }}"
  >
    <div class="swiper-wrapper items-center">
      {% for block in section.blocks %}
        {% liquid
          assign vendor_name = block.settings.vendor_name
          assign vendor_image = block.settings.vendor_image
        %}
        {% if vendor_name and vendor_image %}
          <div class="swiper-slide max-w-5/6 aspect-[120/120] md:aspect-[120/120]">
            <a
              href="/collections/vendors?q={{ vendor_name | url_encode }}"
              class="flex flex-col items-center transition transform hover:-translate-y-1"
              aria-label="{{ vendor_name | default: section_id }}"
            >
              <div class="overflow-hidden rounded-lg shadow-md hover:shadow-xl transition w-fit">
                {% render 'image',
                  image: vendor_image,
                  alt: vendor_name,
                  width: 120,
                  height: 120,
                  class: 'object-cover w-full h-full transition duration-300 ease-in-out',
                  loading: 'lazy'
                %}
              </div>
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Controls -->
    <div
      class="swiper-button-next swiper-button-next-{{ section_id }} !text-gray-700 hover:!text-black transition"
    ></div>
    <div
      class="swiper-button-prev swiper-button-prev-{{ section_id }} !text-gray-700 hover:!text-black transition"
    ></div>
  </div>
</section>

{% schema %}
{
  "name": "Vendor Gallery",
  "settings": [
    {
      "type": "text",
      "id": "title_section",
      "label": "Title for brands list"
    },
    {
      "type": "select",
      "id": "title_section_alignment",
      "label": "Title Section Alignment",
      "options": [
        {
          "value": "text-center",
          "label": "Center"
        },
        {
          "value": "text-left",
          "label": "Left"
        },
        {
          "value": "text-right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "options": [
        { "value": "w-full", "label": "Full Width" },
        { "value": "max-w-7xl", "label": "Max Width 7xl" },
        { "value": "max-w-5xl", "label": "Max Width 5xl" }
      ],
      "default": "max-w-7xl"
    },
    {
      "type": "select",
      "id": "title_font_size",
      "label": "Title Font Size",
      "options": [
        { "value": "text-xl", "label": "XL" },
        { "value": "text-2xl", "label": "2XL" },
        { "value": "text-3xl", "label": "3XL" },
        { "value": "text-4xl", "label": "4XL" }
      ],
      "default": "text-2xl"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#111827"
    },
    {
      "type": "range",
      "id": "padding_vertical",
      "label": "Section Padding vertical (px)",
      "default": 20,
      "min": 0,
      "max": 100,
      "step": 5
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "label": "Section Padding horizontal (px)",
      "default": 20,
      "min": 0,
      "max": 100,
      "step": 5
    }
  ],
  "blocks": [
    {
      "type": "vendor_block",
      "name": "Vendor",
      "settings": [
        {
          "type": "text",
          "id": "vendor_name",
          "label": "Vendor Name (exact)"
        },
        {
          "type": "image_picker",
          "id": "vendor_image",
          "label": "Vendor Image"
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Vendor Gallery",
      "category": "Images"
    }
  ]
}
{% endschema %}
